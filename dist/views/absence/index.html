<div id="absence">
    <div class="addon-body">

        <div class="top-bar">
            <div class="col-md-6">
                <ui-select ng-model="selected.room" theme="selectize" on-select="loadClassRoom()">
                    <ui-select-match placeholder="{{ 'absence.placeholder-classroom' | translate }}">{{$select.selected.name }}</ui-select-match>
                    <ui-select-choices repeat="item in rooms | filter: $select.search">
                        <div ng-bind-html="item.name | highlight: $select.search"></div>
                        <small ng-bind-html="item.description | highlight: $select.search"></small>
                    </ui-select-choices>
                </ui-select>
            </div>

        </div>
        <div class="students">
            <div data-ng-show="selected.room">
                <div class="abs-title">
                    <h3>
                        <svg width="18px" height="18px" viewBox="0 0 28 28" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
                            <g id="Page-1" stroke="none" stroke-width="1" fill-rule="evenodd" sketch:type="MSPage">
                                <g id="Icon-Set" sketch:type="MSLayerGroup" transform="translate(-102.000000, -933.000000)">
                                    <path d="M128,941 C128,942.104 127.104,943 126,943 L122,943 C120.896,943 120,942.104 120,941 L120,937 C120,935.896 120.896,935 122,935 L126,935 C127.104,935 128,935.896 128,937 L128,941 L128,941 Z M126,933 L122,933 C119.791,933 118,934.791 118,937 L118,941 C118,943.209 119.791,945 122,945 L126,945 C128.209,945 130,943.209 130,941 L130,937 C130,934.791 128.209,933 126,933 L126,933 Z M128,957 C128,958.104 127.104,959 126,959 L122,959 C120.896,959 120,958.104 120,957 L120,953 C120,951.896 120.896,951 122,951 L126,951 C127.104,951 128,951.896 128,953 L128,957 L128,957 Z M126,949 L122,949 C119.791,949 118,950.791 118,953 L118,957 C118,959.209 119.791,961 122,961 L126,961 C128.209,961 130,959.209 130,957 L130,953 C130,950.791 128.209,949 126,949 L126,949 Z M112,941 C112,942.104 111.104,943 110,943 L106,943 C104.896,943 104,942.104 104,941 L104,937 C104,935.896 104.896,935 106,935 L110,935 C111.104,935 112,935.896 112,937 L112,941 L112,941 Z M110,933 L106,933 C103.791,933 102,934.791 102,937 L102,941 C102,943.209 103.791,945 106,945 L110,945 C112.209,945 114,943.209 114,941 L114,937 C114,934.791 112.209,933 110,933 L110,933 Z M112,957 C112,958.104 111.104,959 110,959 L106,959 C104.896,959 104,958.104 104,957 L104,953 C104,951.896 104.896,951 106,951 L110,951 C111.104,951 112,951.896 112,953 L112,957 L112,957 Z M110,949 L106,949 C103.791,949 102,950.791 102,953 L102,957 C102,959.209 103.791,961 106,961 L110,961 C112.209,961 114,959.209 114,957 L114,953 C114,950.791 112.209,949 110,949 L110,949 Z" id="Fill-62" sketch:type="MSShapeGroup"></path>
                                </g>
                            </g>
                        </svg>
                        Liste des étudiants ({{ absence.room.users.length }})
                    </h3>
                </div>

              <div class="spinner" data-ng-show="isLoading">
                <div class="double-bounce1"></div>
                <div class="double-bounce2"></div>
              </div>


              <div class="row" data-ng-show="!isLoading">
                    <div class="col-md-12">


                        <!-- Users -->
                        <div ng-repeat="user in absence.room.users | orderBy: 'lastName'" class="col-sm-3 student" data-ng-click="onSelectStudent(user)" data-ng-if="user.type == 9" data-ng-mouseover="isOver = true" data-ng-mouseleave="isOver = false" data-ng-class="{isSelected: existStudent(user.id) || isOver}">
                        <div class="thumbnail">

                            <div class="student-avatar">
                                <img alt="Avatar" ng-src="{{user.avatar}}" class="img-pointer img-circle">

                                <span class="checkStudent" ng-show="existStudent(user.id)">
                                    <i class="fa fa-check"></i>
                                </span>
                            </div>
                            <div class="displayName">
                                <p>{{ user.lastName }}</p>
                                <p>{{ user.firstName }}</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="addon-right sum-up">
    <h3>
        <span class="nb-absents">{{ absence.students.length }}</span> {{ 'absence.absentees' | translate }}<span data-ng-if="absence.students.length > 1">s</span>
        <span class="date">{{date | date:'dd/MM/yyyy'}}</span>
    </h3>
    <ul>
        <li data-ng-repeat="student in absence.students" class="displayName">
            <img ng-src="{{ student.avatar }}" class="avatar avatar-xs-medium">
            <span class="displayName">
                <span>{{ student.lastName }}</span> {{ student.firstName }}
            </span>
        </li>
    </ul>
    <br>
    <form data-ng-submit="submitAbsence()">
        <!--<div class="row">
            <input class="form-control" data-ng-model="absence.email"
            placeholder="{{ 'absence.placeholder-email' | translate }}"/>
        </div>-->
        <div class="row" data-ng-if="notSend">
            <div class="row">
                <textarea class="form-control" data-ng-model="absence.comment" placeholder="{{ 'absence.placeholder-content' | translate }}" rows="3"></textarea>
            </div>
            <br>
            <button class="btn btn-primary" type="submit"><i class="fa fa-paper-plane-o"></i> &nbsp; {{ 'absence.send-cta' | translate }}</button>
        </div>
        <div data-ng-if="!notSend" style="text-align:center;color:#4eb69f; margin-top: 20px">
            La liste a bien été envoyée !<br><br>
            <svg width="26px" height="26px" fill="#4eb69f" viewBox="0 0 32 26" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
                <g id="Page-1" stroke="none" stroke-width="1" fill-rule="evenodd" sketch:type="MSPage">
                    <g id="Icon-Set-Filled" sketch:type="MSLayerGroup" transform="translate(-518.000000, -1039.000000)">
                        <path d="M548.783,1040.2 C547.188,1038.57 544.603,1038.57 543.008,1040.2 L528.569,1054.92 L524.96,1051.24 C523.365,1049.62 520.779,1049.62 519.185,1051.24 C517.59,1052.87 517.59,1055.51 519.185,1057.13 L525.682,1063.76 C527.277,1065.39 529.862,1065.39 531.457,1063.76 L548.783,1046.09 C550.378,1044.46 550.378,1041.82 548.783,1040.2" id="Fill-34" sketch:type="MSShapeGroup"></path>
                    </g>
                </g>
            </svg>
        </div>
    </form>
</div>
</div>