<style>.ui-view-container{overflow:hidden;}</style>
<!-- Text editor -->
<div id="view-course">

    <!-- Course toolbar -->
    <div class="course-top-bar">
            <div class="row">

                <div class="col-md-2" style="padding-left: 10px">
                        <a class="btn btn-default" href="#/mooc/{{course.id}}" target="_blank">
                        Prévisualiser
                    </a>
                </div>

                <div class="col-md-4" style="width: 32%;font-size: 1.4rem">
                    <span style="color: #929294;display: block;margin-top: 8px">Dernière modification <span class="msg-date" am-time-ago="course.updatedAt"> </span></span>
                </div>


                <div class="col-md-2" style="padding-right: 0">
                    <button class="btn btn-primary" data-ng-click="saveCourse()">Enregistrer</button>
                </div>

                <div class="col-md-2" style="padding-left: 10px">
                    <button class="btn btn-success" data-ng-click="publishCourse()" data-ng-if="!course.published">
                        <i class="fa fa-share"></i> &nbsp;Publier
                    </button>

                    <button class="btn btn-default" data-ng-click="publishCourse()" data-ng-if="course.published" tooltip="Désactiver le cours pour le masquer aux étudiants.">
                        <i class="fa fa-edit"></i> &nbsp;Désactiver
                    </button>
                </div>

            </div>
        </div>

    <!-- Course Editor -->
    <div id="course-editor-wrapper">
        <div id="course-editor" autofocus>
        </div>

        <div class="bottom-corner">
        </div>
    </div>
</div>

<!-- Course files -->
<div id="course-files">

    <!--<div class="buttons">
    <button class="btn" data-ng-click="saveCourse()"><i class="fa fa-share"></i> &nbsp;Publier</button>
    <!--<button class="btn btn-default" data-ng-click="saveCourse()"><i class="fa fa-edit"></i> &nbsp;Modifier le titre</button>
    <button class="btn btn-default" data-ng-click="saveCourse(true)"><i class="fa fa-times"></i> &nbsp;Supprimer le cours</button>--
</div>-->



<div class="panel panel-purple">
    <!-- PANEL TITLE -->
    <div class="panel-heading">
        <a href="javascript:;" data-ng-click="expand.courses = !expand.courses">
            <i class="fa fa-angle-down ng-scope" ng-if="expand.courses"></i> &nbsp;Classrooms
        </a>
    </div>

    <table class="table table-striped" data-ng-if="expand.exercises">
        <tbody>
            <tr data-ng-repeat="room in course.rooms">
                <td>
                    <i class="fa fa-graduation-cap"></i> &nbsp;{{room.name}}
                    <i data-ng-click="removeClassRoom(room.id)" class="fa fa-times pull-right"></i>
                
            
            <tr>
                <td>
                    <tags-input ng-model="course.addClassRooms" display-property="name" max-tags="10" on-tag-added="addClassRoom()" add-from-autocomplete-only="true" placeholder="Ajouter une classe">

                    <auto-complete min-length="1" source="loadTags($query)" load-on-down-arrow="true" load-on-empty="true" load-on-focus="true"></auto-complete>

                </tags-input>
            
        
    
</table>
</div>


<div class="panel panel-default panel-success">
    <!-- PANEL TITLE -->
    <div class="panel-heading">
        <a href="javascript:;" data-ng-click="expand.courses = !expand.courses">
            <i class="fa fa-angle-down ng-scope" ng-if="expand.courses"></i> &nbsp;Support de cours
            ({{(course.documents|filter: { exercise: false }).length}})
        </a>
        <i class="fa fa-upload"></i>
        <input data-ng-click="expand.upload='content'" nv-file-select uploader="uploader" class="upload-file-input" id="uploadBtn" type="file" multiple tooltip="Mettre en ligne un nouveau support">
    </div>
    <table class="table table-striped" data-ng-if="expand.courses">
        <tbody>


            <!-- Course file to upload -->

            <tr ng-repeat="item in uploader.queue | orderBy: 'name' | limitTo: 5" data-ng-if="expand.upload == 'content'">
                <td ng-show="uploader.isHTML5" style="cursor:pointer">
                    <div>
                        <span class="pull-left" style="margin-bottom:3px">{{ item.file.name | cut:false:19  }} </span>
                        <p class="progress-load pull-right" ng-class="{'load-done': item.progress == 100}">
                            {{ item.progress == 100 ? '' : item.progress + '%' }}
                            <i class="fa fa-check" data-ng-if="item.progress == 100" style="font-size:12px;line-height:2px"></i>
                        </p>
                    </div>

                    <div class="cleafix">
                        <div class="progress" style="margin-bottom: 0;height:10px;padding:2px;clear:both">
                            <div class="progress-bar" role="progressbar" ng-style="{ 'width': item.progress + '%' }">
                            </div>
                        </div>
                    </div>
                
            

            <!-- List of all content files -->

            <tr data-ng-repeat="file in course.documents" data-ng-if="!file.exercise" data-ng-click="download(file)">
                <td class="ng-binding">
                    <span class="badge-trash pull-right" data-ng-click="$event.stopPropagation(); remove(file)">
                        <i class="fa fa-trash-o"></i>
                    </span>
                    <span class="fileIcon {{file.icon}}"></span>
                    {{ file.name }}
                
            
        
    </table>
</div>

<div class="panel panel-default panel-primary">
    <!-- PANEL TITLE -->
    <div class="panel-heading">
        <a href="javascript:;" data-ng-click="expand.exercises = !expand.exercises">
            <i class="fa fa-angle-down ng-scope" ng-if="expand.exercises"></i> &nbsp;Exercices
            ({{(course.documents|filter: { exercise: true }).length}})
        </a>
        <i class="fa fa-upload"></i>
        <input data-ng-click="expand.upload='exercise'" nv-file-select uploader="uploader" class="upload-file-input" id="uploadBtn" type="file" multiple tooltip="Mettre en ligne un nouvel exerice">
    </div>
    <table class="table table-striped" data-ng-if="expand.exercises">
        <tbody>


            <!-- Exercise file to upload -->

            <tr ng-repeat="item in uploader.queue | orderBy: 'name' | limitTo: 5" data-ng-if="expand.upload == 'exercise'">
                <td ng-show="uploader.isHTML5" style="cursor:pointer">
                    <div>
                        <span class="pull-left" style="margin-bottom:3px">{{ item.file.name | cut:false:19  }} </span>
                        <p class="progress-load pull-right" ng-class="{'load-done': item.progress == 100}">
                            {{ item.progress == 100 ? '' : item.progress + '%' }}
                            <i class="fa fa-check" data-ng-if="item.progress == 100" style="font-size:12px;line-height:2px"></i>
                        </p>
                    </div>

                    <div class="cleafix">
                        <div class="progress" style="margin-bottom: 0;height:10px;padding:2px;clear:both">
                            <div class="progress-bar" role="progressbar" ng-style="{ 'width': item.progress + '%' }">
                            </div>
                        </div>
                    </div>
                
            


            <!-- List of all exercise files -->

            <tr data-ng-repeat="file in course.documents" data-ng-if="file.exercise" data-ng-click="download(file)">
                <td class="ng-binding">
                    <span class="badge-trash pull-right" data-ng-click="$event.stopPropagation(); remove(file)">
                        <i class="fa fa-trash-o"></i>
                    </span>
                    <span class="fileIcon {{file.icon}}"></span>
                    {{ file.name }}
                
            
        
    </table>
</div>
</div>